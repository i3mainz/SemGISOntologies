@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .

<http://www.adv-online.de/namespaces/adv/gid/6.0#AA_Fortfuehrungsauftrag> a owl:Class,
        owl:ObjectProperty,
        <http://www.w3.org/ns/ldp#Resource>,
        <https://www.iana.org/assignments/media-types/text/turtle#Resource> ;
    rdfs:label "AA_Fortfuehrungsauftrag"@de ;
    rdfs:subClassOf [ ],
        [ ],
        [ ],
        [ ],
        [ ],
        [ ],
        <http://www.adv-online.de/namespaces/adv/gid/6.0#AA_Auftrag> ;
    rdfs:subPropertyOf <http://www.adv-online.de/namespaces/adv/gid/6.0#AA_Auftrag> ;
    skos:definition """Die Objektart AA_Fortfuehrungsauftrag aktualisiert Bestandsdaten. Fachinformationssystemspezifische Fortführungsaufträge können zusätzliche Vorgaben realisieren.

Sinngemäßer Ablauf der Verarbeitung:

1. Eröffnen der Protokolldatei

2. Einlesen der zu verarbeitenden Objektänderungen (Transaction) = qualifizierte Erhebungsdaten

3. Prüfung der selbstbezogenen Eigenschaften der einzutragenden und zu überschreibenden Objekte gegen die Festlegungen des Objektartenkatalogs (Vollständigkeitsprüfung, Prüfung zulässiger Werte, Prüfung definierter Werteabhängigkeiten)

4. Prüfung der Aktualität der zu überschreibenden und zu löschenden Objekte, dabei Prüfung ob diese Objekte bereits durch einen anderen Auftrag gesperrt sind und Sperren dieser Objekte im Bestand (soweit noch nicht explizit für diesen Auftrag gesperrt).

5. Soweit Sperrungen durch andere Aufträge vorliegen: Status "Abbruch der Verarbeitung" setzen und Auflistung der gesperrten Objekte im Verarbeitungsprotokoll.

6. Prüfung der fremdbezogenen Eigenschaften der einzutragenden, zu überschreibenden und zu löschenden Objekte innerhalb der qualifizierten Erhebungsdaten und gegen den Bestand. Prüfung, ob referenzierte Objekte bereits durch andere Aufträge gesperrt sind

7. Soweit Sperrungen durch andere Aufträge vorliegen: Status "Abbruch der Verarbeitung" setzen und Auflistung der gesperrten Objekte im Verarbeitungsprotokoll.

8. Soweit Status "Abbruch der Verarbeitung" vorliegt: Abbruch der Verarbeitung. Rücknahme der durchgeführten eigenen Sperrungen. Zurücksetzen des Auftrags. Ausgabe des Verarbeitungsprotokolls.

9. Fortführungsfallbezogene Erzeugung der impliziten Fortführungsdaten: Es handelt sich um Maßnahmen zur Erhaltung der Konsistenz der Daten. Diese Konsistenz muss am Ende des Fortführungsfalles und des Fortführungsauftrages vorliegen, zwischenzeitliche Inkonsistenzen werden hingenommen. Für die in 9.1 implizit erzeugten Löschbefehle kann das bedeuten, dass sie wieder aufgehoben werden müssen.

9.1. Feststellen, ob durch vorgesehene Löschungen von Referenzen Objekte ihre Existenzberechtigung verlieren würden. Dies ist regelmäßig der Fall, wenn bei Objekten, die nur durch Referenzierung anderer Objekte eine Existenzberechtigung haben (z.B. Präsentationsobjekte), die letzte Instanz einer Muss - Referenz - Art gelöscht werden soll. Tritt dieser Fall ein, so werden Löschbefehle für die entsprechenden Objekte erzeugt und diese Objekte gesperrt, soweit sie nicht bereits durch denselben Auftrag gesperrt sind. Soweit Sperrungen durch andere Aufträge vorliegen: Status "Abbruch der Verarbeitung" setzen mit Auflistung der gesperrten Objekte im Verarbeitungsprotokoll. Die Objektarten, deren Instanzen wegen fehlender notwendiger Referenzen gelöscht werden müssen, sind abschließend in der Tabelle "Liste der Fachobjekte und Referenzen, die einer impliziten Fortführung unterliegen" angegeben.

9.2. Feststellen, welche Fachobjekte von einer impliziten Geometriebehandlung entsprechend der definierten Themenbereiche betroffen wären. Erzeugung von Überschreibungsbefehlen für diese Objekte und Sperren dieser Objekte, soweit sie nicht bereits durch denselben Auftrag gesperrt sind. Sind die betroffenen Objekte bereits durch einen anderen Auftrag gesperrt, Status "Abbruch der Verarbeitung" setzen mit Auflistung der gesperrten Objekte im Verarbeitungsprotokoll.

10. Soweit Status "Abbruch der Verarbeitung" vorliegt: Abbruch der Verarbeitung. Rücknahme der durchgeführten eigenen Sperrungen. Zurücksetzen des Auftrags. Ausgabe des Verarbeitungsprotokolls.

11. Erzeugung der endgültigen Identifikatoren für die einzutragenden Fachobjekte. Vergabe von Entstehungsdatum/-zeit (durch Ableitung aus der Systemzeit) für die neu einzutragenden oder zu überschreibenden Fachobjekte. Alle Objekte einer Transaction erhalten dasselbe Entstehungsdatum/-zeit. 12. Fortführung des Bestandes mit Versionierung der gelöschten und überschriebenen Bestandsobjekte (sofern Versionierung unterstützt wird).

13. Aufbau der Gegenreferenzen in den Bestandsdaten, ohne dass dies zu neuen Objektversionen führt. (Referenzen werden beim Datenaustausch über die NAS nur einseitig in der bevorzugten Referenzrichtung ausgetauscht.)

14. Reguläres Ende der Verarbeitung. Aufhebung aller für den Auftrag gesetzten Sperren. Zurücksetzen des Auftrags."""@de .

